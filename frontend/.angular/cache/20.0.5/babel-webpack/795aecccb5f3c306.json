{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { environment } from '../../../../environments/environment';\nlet PackageListComponent = class PackageListComponent {\n  constructor(http, dialog) {\n    this.http = http;\n    this.dialog = dialog;\n    this.packages = [];\n    this.displayedColumns = ['name', 'type', 'price', 'active', 'actions'];\n    this.newPackage = {};\n    this.isEditing = false;\n    this.editingPackageId = null;\n  }\n  ngOnInit() {\n    this.fetchPackages();\n  }\n  fetchPackages() {\n    this.http.get(`${environment.apiUrl}/admin/packages`).subscribe({\n      next: response => {\n        this.packages = response.data;\n      },\n      error: err => {\n        console.error('Failed to fetch packages', err);\n      }\n    });\n  }\n  addFeature() {\n    if (!this.newPackage.features) {\n      this.newPackage.features = [];\n    }\n    this.newPackage.features.push({\n      name: '',\n      description: '',\n      isUnlimited: false,\n      limit: 0\n    });\n  }\n  removeFeature(index) {\n    if (this.newPackage.features) {\n      this.newPackage.features.splice(index, 1);\n    }\n  }\n  startEdit(pkg) {\n    this.isEditing = true;\n    this.editingPackageId = pkg._id;\n    this.newPackage = {\n      ...pkg\n    };\n  }\n  cancelEdit() {\n    this.isEditing = false;\n    this.editingPackageId = null;\n    this.newPackage = {};\n  }\n  submitPackage() {\n    if (this.editingPackageId) {\n      // Update existing package\n      this.http.put(`${environment.apiUrl}/admin/packages/${this.editingPackageId}`, this.newPackage).subscribe({\n        next: () => {\n          this.fetchPackages();\n          this.cancelEdit();\n        },\n        error: err => {\n          console.error('Failed to update package', err);\n        }\n      });\n    } else {\n      // Create new package\n      this.http.post(`${environment.apiUrl}/admin/packages`, this.newPackage).subscribe({\n        next: () => {\n          this.fetchPackages();\n          this.newPackage = {};\n        },\n        error: err => {\n          console.error('Failed to create package', err);\n        }\n      });\n    }\n  }\n  deletePackage(id) {\n    if (confirm('Are you sure you want to delete this package?')) {\n      this.http.delete(`${environment.apiUrl}/admin/packages/${id}`).subscribe({\n        next: () => {\n          this.fetchPackages();\n        },\n        error: err => {\n          console.error('Failed to delete package', err);\n        }\n      });\n    }\n  }\n  togglePackageStatus(pkg) {\n    this.http.patch(`${environment.apiUrl}/admin/packages/${pkg._id}/toggle-status`, {}).subscribe({\n      next: () => {\n        this.fetchPackages();\n      },\n      error: err => {\n        console.error('Failed to toggle package status', err);\n      }\n    });\n  }\n};\nPackageListComponent = __decorate([Component({\n  selector: 'app-package-list',\n  templateUrl: './package-list.component.html',\n  styleUrls: ['./package-list.component.scss']\n})], PackageListComponent);\nexport { PackageListComponent };","map":{"version":3,"names":["Component","environment","PackageListComponent","constructor","http","dialog","packages","displayedColumns","newPackage","isEditing","editingPackageId","ngOnInit","fetchPackages","get","apiUrl","subscribe","next","response","data","error","err","console","addFeature","features","push","name","description","isUnlimited","limit","removeFeature","index","splice","startEdit","pkg","_id","cancelEdit","submitPackage","put","post","deletePackage","id","confirm","delete","togglePackageStatus","patch","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\winni\\OneDrive\\Desktop\\JINZ-Media-Full-Source\\frontend\\src\\app\\features\\package-management\\package-list\\package-list.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\ninterface PackageFeature {\r\n  name: string;\r\n  description: string;\r\n  isUnlimited: boolean;\r\n  limit?: number;\r\n}\r\n\r\ninterface Package {\r\n  _id: string;\r\n  name: string;\r\n  description: string;\r\n  type: 'monthly' | 'yearly' | 'lifetime';\r\n  price: number;\r\n  originalPrice?: number;\r\n  currency: 'VND' | 'USD';\r\n  features: PackageFeature[];\r\n  image?: string;\r\n  isActive: boolean;\r\n  isPopular: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-package-list',\r\n  templateUrl: './package-list.component.html',\r\n  styleUrls: ['./package-list.component.scss']\r\n})\r\nexport class PackageListComponent implements OnInit {\r\n  packages: Package[] = [];\r\n  displayedColumns: string[] = ['name', 'type', 'price', 'active', 'actions'];\r\n  newPackage: Partial<Package> = {};\r\n  isEditing = false;\r\n  editingPackageId: string | null = null;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private dialog: MatDialog\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.fetchPackages();\r\n  }\r\n\r\n  fetchPackages() {\r\n    this.http.get<{success: boolean, count: number, data: Package[]}>(\r\n      `${environment.apiUrl}/admin/packages`\r\n    ).subscribe({\r\n      next: (response) => {\r\n        this.packages = response.data;\r\n      },\r\n      error: (err) => {\r\n        console.error('Failed to fetch packages', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  addFeature() {\r\n    if (!this.newPackage.features) {\r\n      this.newPackage.features = [];\r\n    }\r\n    this.newPackage.features.push({\r\n      name: '',\r\n      description: '',\r\n      isUnlimited: false,\r\n      limit: 0\r\n    });\r\n  }\r\n\r\n  removeFeature(index: number) {\r\n    if (this.newPackage.features) {\r\n      this.newPackage.features.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  startEdit(pkg: Package) {\r\n    this.isEditing = true;\r\n    this.editingPackageId = pkg._id;\r\n    this.newPackage = {...pkg};\r\n  }\r\n\r\n  cancelEdit() {\r\n    this.isEditing = false;\r\n    this.editingPackageId = null;\r\n    this.newPackage = {};\r\n  }\r\n\r\n  submitPackage() {\r\n    if (this.editingPackageId) {\r\n      // Update existing package\r\n      this.http.put<{success: boolean, data: Package}>(\r\n        `${environment.apiUrl}/admin/packages/${this.editingPackageId}`, \r\n        this.newPackage\r\n      ).subscribe({\r\n        next: () => {\r\n          this.fetchPackages();\r\n          this.cancelEdit();\r\n        },\r\n        error: (err) => {\r\n          console.error('Failed to update package', err);\r\n        }\r\n      });\r\n    } else {\r\n      // Create new package\r\n      this.http.post<{success: boolean, data: Package}>(\r\n        `${environment.apiUrl}/admin/packages`, \r\n        this.newPackage\r\n      ).subscribe({\r\n        next: () => {\r\n          this.fetchPackages();\r\n          this.newPackage = {};\r\n        },\r\n        error: (err) => {\r\n          console.error('Failed to create package', err);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  deletePackage(id: string) {\r\n    if (confirm('Are you sure you want to delete this package?')) {\r\n      this.http.delete<{success: boolean}>(\r\n        `${environment.apiUrl}/admin/packages/${id}`\r\n      ).subscribe({\r\n        next: () => {\r\n          this.fetchPackages();\r\n        },\r\n        error: (err) => {\r\n          console.error('Failed to delete package', err);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  togglePackageStatus(pkg: Package) {\r\n    this.http.patch<{success: boolean, data: Package}>(\r\n      `${environment.apiUrl}/admin/packages/${pkg._id}/toggle-status`,\r\n      {}\r\n    ).subscribe({\r\n      next: () => {\r\n        this.fetchPackages();\r\n      },\r\n      error: (err) => {\r\n        console.error('Failed to toggle package status', err);\r\n      }\r\n    });\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}