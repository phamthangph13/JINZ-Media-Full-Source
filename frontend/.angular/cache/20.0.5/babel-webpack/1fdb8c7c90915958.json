{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../feature-management/services/service.service\";\nimport * as i3 from \"@angular/common\";\nfunction PackageFormComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60);\n    i0.ɵɵtext(1, \" Vui l\\u00F2ng nh\\u1EADp t\\u00EAn g\\u00F3i \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60);\n    i0.ɵɵtext(1, \" Vui l\\u00F2ng ch\\u1ECDn lo\\u1EA1i g\\u00F3i \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 60);\n    i0.ɵɵtext(1, \" Vui l\\u00F2ng nh\\u1EADp gi\\u00E1 h\\u1EE3p l\\u1EC7 \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"label\", 61);\n    i0.ɵɵtext(2, \"Th\\u1EDDi gian \");\n    i0.ɵɵelementStart(3, \"span\", 10);\n    i0.ɵɵtext(4, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(5, \"input\", 62);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"label\", 63);\n    i0.ɵɵtext(2, \"\\u0110\\u01A1n v\\u1ECB th\\u1EDDi gian \");\n    i0.ɵɵelementStart(3, \"span\", 10);\n    i0.ɵɵtext(4, \"*\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"select\", 64)(6, \"option\", 65);\n    i0.ɵɵtext(7, \"Ng\\u00E0y\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"option\", 66);\n    i0.ɵɵtext(9, \"Th\\u00E1ng\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"option\", 67);\n    i0.ɵɵtext(11, \"N\\u0103m\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction PackageFormComponent_div_67_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 82);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const service_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"value\", service_r2._id);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate2(\" \", service_r2.name, \" (\", ctx_r2.formatServiceType(service_r2.type), \") \");\n  }\n}\nfunction PackageFormComponent_div_67_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 83)(1, \"label\", 71);\n    i0.ɵɵtext(2, \"Gi\\u1EDBi h\\u1EA1n\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 84);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 68)(1, \"div\", 69)(2, \"div\", 70)(3, \"label\", 71);\n    i0.ɵɵtext(4, \"D\\u1ECBch v\\u1EE5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"select\", 72)(6, \"option\", 15);\n    i0.ɵɵtext(7, \"Ch\\u1ECDn d\\u1ECBch v\\u1EE5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, PackageFormComponent_div_67_option_8_Template, 2, 3, \"option\", 73);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 74)(10, \"div\", 75);\n    i0.ɵɵelement(11, \"input\", 76);\n    i0.ɵɵelementStart(12, \"label\", 77);\n    i0.ɵɵtext(13, \" Kh\\u00F4ng gi\\u1EDBi h\\u1EA1n \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(14, PackageFormComponent_div_67_div_14_Template, 4, 0, \"div\", 78);\n    i0.ɵɵelementStart(15, \"div\", 79)(16, \"button\", 80);\n    i0.ɵɵlistener(\"click\", function PackageFormComponent_div_67_Template_button_click_16_listener() {\n      const i_r4 = i0.ɵɵrestoreView(_r1).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeFeature(i_r4));\n    });\n    i0.ɵɵelement(17, \"i\", 81);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    let tmp_7_0;\n    const feature_r5 = ctx.$implicit;\n    const i_r4 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroupName\", i_r4);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.availableServices);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"id\", \"unlimited-\" + i_r4);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"for\", \"unlimited-\" + i_r4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !((tmp_7_0 = feature_r5.get(\"isUnlimited\")) == null ? null : tmp_7_0.value));\n  }\n}\nfunction PackageFormComponent_div_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 85);\n    i0.ɵɵelement(1, \"i\", 86);\n    i0.ɵɵtext(2, \" Ch\\u01B0a c\\u00F3 t\\u00EDnh n\\u0103ng n\\u00E0o. Click \\\"Th\\u00EAm t\\u00EDnh n\\u0103ng\\\" \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PackageFormComponent_div_94_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"h6\", 5);\n    i0.ɵɵtext(3, \"Xem tr\\u01B0\\u1EDBc h\\u00ECnh \\u1EA3nh\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 87);\n    i0.ɵɵelement(5, \"img\", 88);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", ctx_r2.imagePreview || ctx_r2.getImageUrl(ctx_r2.packageData == null ? null : ctx_r2.packageData.image), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PackageFormComponent_i_102_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 89);\n  }\n}\nfunction PackageFormComponent_i_103_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 90);\n  }\n}\nexport class PackageFormComponent {\n  constructor(fb, serviceService) {\n    this.fb = fb;\n    this.serviceService = serviceService;\n    this.packageData = null;\n    this.editMode = false;\n    this.loading = false;\n    this.formSubmit = new EventEmitter();\n    this.formCancel = new EventEmitter();\n    this.selectedFile = null;\n    this.imagePreview = null;\n    this.availableServices = [];\n    this.initForm();\n  }\n  ngOnInit() {\n    this.initForm();\n    this.loadServices();\n  }\n  ngOnChanges(changes) {\n    if (changes['packageData'] && this.packageData && this.editMode) {\n      this.populateForm();\n    }\n  }\n  initForm() {\n    this.packageForm = this.fb.group({\n      name: ['', [Validators.required, Validators.maxLength(100)]],\n      description: ['', [Validators.maxLength(500)]],\n      type: ['', Validators.required],\n      price: [0, [Validators.required, Validators.min(0)]],\n      originalPrice: [0, Validators.min(0)],\n      currency: ['VND'],\n      durationValue: [1, Validators.min(1)],\n      durationUnit: ['months'],\n      features: this.fb.array([]),\n      isActive: [true],\n      isPopular: [false],\n      displayOrder: [0, Validators.min(0)]\n    });\n  }\n  get features() {\n    return this.packageForm.get('features');\n  }\n  addFeature() {\n    const featureGroup = this.fb.group({\n      serviceId: ['', Validators.required],\n      isUnlimited: [true],\n      limit: [0, Validators.min(0)]\n    });\n    this.features.push(featureGroup);\n  }\n  removeFeature(index) {\n    this.features.removeAt(index);\n  }\n  populateForm() {\n    if (!this.packageData) return;\n    this.packageForm.patchValue({\n      name: this.packageData.name,\n      description: this.packageData.description,\n      type: this.packageData.type,\n      price: this.packageData.price,\n      originalPrice: this.packageData.originalPrice,\n      currency: this.packageData.currency,\n      durationValue: this.packageData.duration?.value,\n      durationUnit: this.packageData.duration?.unit,\n      isActive: this.packageData.isActive,\n      isPopular: this.packageData.isPopular,\n      displayOrder: this.packageData.displayOrder\n    });\n    // Clear and populate features\n    this.features.clear();\n    this.packageData.features.forEach(feature => {\n      const featureGroup = this.fb.group({\n        serviceId: [feature.serviceId, Validators.required],\n        isUnlimited: [feature.isUnlimited],\n        limit: [feature.limit, Validators.min(0)]\n      });\n      this.features.push(featureGroup);\n    });\n  }\n  onFileSelect(event) {\n    const file = event.target.files[0];\n    if (file) {\n      // Validate file size (5MB)\n      if (file.size > 5 * 1024 * 1024) {\n        alert('File quá lớn. Vui lòng chọn file nhỏ hơn 5MB.');\n        return;\n      }\n      // Validate file type\n      if (!file.type.startsWith('image/')) {\n        alert('Vui lòng chọn file hình ảnh.');\n        return;\n      }\n      this.selectedFile = file;\n      // Create preview\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.imagePreview = e.target?.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  onSubmit() {\n    if (this.packageForm.valid) {\n      const formValue = this.packageForm.value;\n      const packageRequest = {\n        name: formValue.name,\n        description: formValue.description,\n        type: formValue.type,\n        price: formValue.price,\n        originalPrice: formValue.originalPrice || undefined,\n        currency: formValue.currency,\n        features: formValue.features,\n        isActive: formValue.isActive,\n        isPopular: formValue.isPopular,\n        displayOrder: formValue.displayOrder,\n        image: this.selectedFile || undefined\n      };\n      // Add duration for non-lifetime packages\n      if (formValue.type !== 'lifetime') {\n        packageRequest.duration = {\n          value: formValue.durationValue,\n          unit: formValue.durationUnit\n        };\n      }\n      this.formSubmit.emit(packageRequest);\n    }\n  }\n  onCancel() {\n    this.formCancel.emit();\n  }\n  isFieldInvalid(fieldName) {\n    const field = this.packageForm.get(fieldName);\n    return !!(field && field.invalid && (field.dirty || field.touched));\n  }\n  getImageUrl(imagePath) {\n    if (!imagePath) return '';\n    return `http://localhost:5000/${imagePath}`;\n  }\n  loadServices() {\n    this.serviceService.getServices().subscribe({\n      next: services => {\n        this.availableServices = services.filter(s => s.isActive);\n      },\n      error: error => {\n        console.error('Error loading services:', error);\n      }\n    });\n  }\n  formatServiceType(type) {\n    return this.serviceService.formatServiceType(type);\n  }\n  static #_ = this.ɵfac = function PackageFormComponent_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || PackageFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ServiceService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PackageFormComponent,\n    selectors: [[\"app-package-form\"]],\n    inputs: {\n      packageData: \"packageData\",\n      editMode: \"editMode\",\n      loading: \"loading\"\n    },\n    outputs: {\n      formSubmit: \"formSubmit\",\n      formCancel: \"formCancel\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 105,\n    vars: 19,\n    consts: [[1, \"package-form\", 3, \"ngSubmit\", \"formGroup\"], [1, \"row\"], [1, \"col-md-8\"], [1, \"card\", \"mb-4\"], [1, \"card-header\"], [1, \"mb-0\"], [1, \"fas\", \"fa-info-circle\", \"me-2\"], [1, \"card-body\"], [1, \"col-md-6\", \"mb-3\"], [\"for\", \"name\", 1, \"form-label\"], [1, \"text-danger\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"name\", \"placeholder\", \"Nh\\u1EADp t\\u00EAn g\\u00F3i\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"type\", 1, \"form-label\"], [\"id\", \"type\", \"formControlName\", \"type\", 1, \"form-select\"], [\"value\", \"\"], [\"value\", \"monthly\"], [\"value\", \"yearly\"], [\"value\", \"lifetime\"], [1, \"col-12\", \"mb-3\"], [\"for\", \"description\", 1, \"form-label\"], [\"id\", \"description\", \"formControlName\", \"description\", \"rows\", \"3\", \"placeholder\", \"Nh\\u1EADp m\\u00F4 t\\u1EA3 g\\u00F3i...\", 1, \"form-control\"], [1, \"col-md-4\", \"mb-3\"], [\"for\", \"price\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"price\", \"formControlName\", \"price\", \"min\", \"0\", \"step\", \"0.01\", \"placeholder\", \"0\", 1, \"form-control\"], [\"for\", \"originalPrice\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"originalPrice\", \"formControlName\", \"originalPrice\", \"min\", \"0\", \"step\", \"0.01\", \"placeholder\", \"0\", 1, \"form-control\"], [\"for\", \"currency\", 1, \"form-label\"], [\"id\", \"currency\", \"formControlName\", \"currency\", 1, \"form-select\"], [\"value\", \"VND\"], [\"value\", \"USD\"], [\"class\", \"col-md-6 mb-3\", 4, \"ngIf\"], [1, \"card-header\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"fas\", \"fa-star\", \"me-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"click\"], [1, \"fas\", \"fa-plus\", \"me-1\"], [\"formArrayName\", \"features\", 1, \"features-list\"], [\"class\", \"feature-item p-3 border rounded mb-3\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-center text-muted py-4\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"fas\", \"fa-cog\", \"me-2\"], [1, \"mb-3\"], [\"for\", \"image\", 1, \"form-label\"], [\"type\", \"file\", \"id\", \"image\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [1, \"text-muted\"], [\"for\", \"displayOrder\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"displayOrder\", \"formControlName\", \"displayOrder\", \"min\", \"0\", 1, \"form-control\"], [1, \"form-check\", \"mb-3\"], [\"type\", \"checkbox\", \"id\", \"isActive\", \"formControlName\", \"isActive\", 1, \"form-check-input\"], [\"for\", \"isActive\", 1, \"form-check-label\"], [\"type\", \"checkbox\", \"id\", \"isPopular\", \"formControlName\", \"isPopular\", 1, \"form-check-input\"], [\"for\", \"isPopular\", 1, \"form-check-label\"], [\"class\", \"card mb-4\", 4, \"ngIf\"], [1, \"col-12\"], [1, \"d-flex\", \"justify-content-end\", \"gap-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"fas\", \"fa-times\", \"me-1\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"class\", \"fas fa-spinner fa-spin me-1\", 4, \"ngIf\"], [\"class\", \"fas fa-save me-1\", 4, \"ngIf\"], [1, \"invalid-feedback\"], [\"for\", \"durationValue\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"durationValue\", \"formControlName\", \"durationValue\", \"min\", \"1\", \"placeholder\", \"1\", 1, \"form-control\"], [\"for\", \"durationUnit\", 1, \"form-label\"], [\"id\", \"durationUnit\", \"formControlName\", \"durationUnit\", 1, \"form-select\"], [\"value\", \"days\"], [\"value\", \"months\"], [\"value\", \"years\"], [1, \"feature-item\", \"p-3\", \"border\", \"rounded\", \"mb-3\", 3, \"formGroupName\"], [1, \"row\", \"align-items-center\"], [1, \"col-md-6\"], [1, \"form-label\"], [\"formControlName\", \"serviceId\", 1, \"form-select\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-3\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"formControlName\", \"isUnlimited\", 1, \"form-check-input\", 3, \"id\"], [1, \"form-check-label\", 3, \"for\"], [\"class\", \"col-md-2\", 4, \"ngIf\"], [1, \"col-md-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-danger\", 3, \"click\"], [1, \"fas\", \"fa-trash\"], [3, \"value\"], [1, \"col-md-2\"], [\"type\", \"number\", \"formControlName\", \"limit\", \"min\", \"0\", 1, \"form-control\"], [1, \"text-center\", \"text-muted\", \"py-4\"], [1, \"fas\", \"fa-star\", \"fa-2x\", \"mb-2\", \"d-block\"], [1, \"card-body\", \"text-center\"], [\"alt\", \"Package Preview\", 1, \"img-fluid\", \"rounded\", 2, \"max-height\", \"200px\", 3, \"src\"], [1, \"fas\", \"fa-spinner\", \"fa-spin\", \"me-1\"], [1, \"fas\", \"fa-save\", \"me-1\"]],\n    template: function PackageFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function PackageFormComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n        i0.ɵɵelement(6, \"i\", 6);\n        i0.ɵɵtext(7, \" Th\\u00F4ng tin c\\u01A1 b\\u1EA3n \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 1)(10, \"div\", 8)(11, \"label\", 9);\n        i0.ɵɵtext(12, \"T\\u00EAn g\\u00F3i \");\n        i0.ɵɵelementStart(13, \"span\", 10);\n        i0.ɵɵtext(14, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(15, \"input\", 11);\n        i0.ɵɵtemplate(16, PackageFormComponent_div_16_Template, 2, 0, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 8)(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Lo\\u1EA1i g\\u00F3i \");\n        i0.ɵɵelementStart(20, \"span\", 10);\n        i0.ɵɵtext(21, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"select\", 14)(23, \"option\", 15);\n        i0.ɵɵtext(24, \"Ch\\u1ECDn lo\\u1EA1i g\\u00F3i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"option\", 16);\n        i0.ɵɵtext(26, \"H\\u00E0ng th\\u00E1ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"option\", 17);\n        i0.ɵɵtext(28, \"H\\u00E0ng n\\u0103m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"option\", 18);\n        i0.ɵɵtext(30, \"Tr\\u1ECDn \\u0111\\u1EDDi\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(31, PackageFormComponent_div_31_Template, 2, 0, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 19)(33, \"label\", 20);\n        i0.ɵɵtext(34, \"M\\u00F4 t\\u1EA3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"textarea\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 22)(37, \"label\", 23);\n        i0.ɵɵtext(38, \"Gi\\u00E1 \");\n        i0.ɵɵelementStart(39, \"span\", 10);\n        i0.ɵɵtext(40, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(41, \"input\", 24);\n        i0.ɵɵtemplate(42, PackageFormComponent_div_42_Template, 2, 0, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\", 22)(44, \"label\", 25);\n        i0.ɵɵtext(45, \"Gi\\u00E1 g\\u1ED1c\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"div\", 22)(48, \"label\", 27);\n        i0.ɵɵtext(49, \"\\u0110\\u01A1n v\\u1ECB ti\\u1EC1n t\\u1EC7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"select\", 28)(51, \"option\", 29);\n        i0.ɵɵtext(52, \"VND\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"option\", 30);\n        i0.ɵɵtext(54, \"USD\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(55, PackageFormComponent_div_55_Template, 6, 0, \"div\", 31)(56, PackageFormComponent_div_56_Template, 12, 0, \"div\", 31);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(57, \"div\", 3)(58, \"div\", 32)(59, \"h5\", 5);\n        i0.ɵɵelement(60, \"i\", 33);\n        i0.ɵɵtext(61, \" T\\u00EDnh n\\u0103ng g\\u00F3i \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"button\", 34);\n        i0.ɵɵlistener(\"click\", function PackageFormComponent_Template_button_click_62_listener() {\n          return ctx.addFeature();\n        });\n        i0.ɵɵelement(63, \"i\", 35);\n        i0.ɵɵtext(64, \" Th\\u00EAm t\\u00EDnh n\\u0103ng \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(65, \"div\", 7)(66, \"div\", 36);\n        i0.ɵɵtemplate(67, PackageFormComponent_div_67_Template, 18, 5, \"div\", 37)(68, PackageFormComponent_div_68_Template, 3, 0, \"div\", 38);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(69, \"div\", 39)(70, \"div\", 3)(71, \"div\", 4)(72, \"h5\", 5);\n        i0.ɵɵelement(73, \"i\", 40);\n        i0.ɵɵtext(74, \" C\\u00E0i \\u0111\\u1EB7t \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(75, \"div\", 7)(76, \"div\", 41)(77, \"label\", 42);\n        i0.ɵɵtext(78, \"H\\u00ECnh \\u1EA3nh g\\u00F3i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(79, \"input\", 43);\n        i0.ɵɵlistener(\"change\", function PackageFormComponent_Template_input_change_79_listener($event) {\n          return ctx.onFileSelect($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"small\", 44);\n        i0.ɵɵtext(81, \"T\\u1ED1i \\u0111a 5MB. \\u0110\\u1ECBnh d\\u1EA1ng: JPG, PNG, GIF\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(82, \"div\", 41)(83, \"label\", 45);\n        i0.ɵɵtext(84, \"Th\\u1EE9 t\\u1EF1 hi\\u1EC3n th\\u1ECB\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(85, \"input\", 46);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(86, \"div\", 47);\n        i0.ɵɵelement(87, \"input\", 48);\n        i0.ɵɵelementStart(88, \"label\", 49);\n        i0.ɵɵtext(89, \" K\\u00EDch ho\\u1EA1t g\\u00F3i \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(90, \"div\", 47);\n        i0.ɵɵelement(91, \"input\", 50);\n        i0.ɵɵelementStart(92, \"label\", 51);\n        i0.ɵɵtext(93, \" G\\u00F3i ph\\u1ED5 bi\\u1EBFn \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(94, PackageFormComponent_div_94_Template, 6, 1, \"div\", 52);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(95, \"div\", 1)(96, \"div\", 53)(97, \"div\", 54)(98, \"button\", 55);\n        i0.ɵɵlistener(\"click\", function PackageFormComponent_Template_button_click_98_listener() {\n          return ctx.onCancel();\n        });\n        i0.ɵɵelement(99, \"i\", 56);\n        i0.ɵɵtext(100, \" H\\u1EE7y \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(101, \"button\", 57);\n        i0.ɵɵtemplate(102, PackageFormComponent_i_102_Template, 1, 0, \"i\", 58)(103, PackageFormComponent_i_103_Template, 1, 0, \"i\", 59);\n        i0.ɵɵtext(104);\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        let tmp_7_0;\n        let tmp_8_0;\n        i0.ɵɵproperty(\"formGroup\", ctx.packageForm);\n        i0.ɵɵadvance(15);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.isFieldInvalid(\"name\"));\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.isFieldInvalid(\"name\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.isFieldInvalid(\"type\"));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.isFieldInvalid(\"type\"));\n        i0.ɵɵadvance(10);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.isFieldInvalid(\"price\"));\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.isFieldInvalid(\"price\"));\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.packageForm.get(\"type\")) == null ? null : tmp_7_0.value) !== \"lifetime\");\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ((tmp_8_0 = ctx.packageForm.get(\"type\")) == null ? null : tmp_8_0.value) !== \"lifetime\");\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.features.controls);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.features.length === 0);\n        i0.ɵɵadvance(26);\n        i0.ɵɵproperty(\"ngIf\", ctx.imagePreview || ctx.editMode && (ctx.packageData == null ? null : ctx.packageData.image));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"disabled\", ctx.packageForm.invalid || ctx.loading);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", !ctx.loading);\n        i0.ɵɵadvance();\n        i0.ɵɵtextInterpolate1(\" \", ctx.editMode ? \"C\\u1EADp nh\\u1EADt\" : \"T\\u1EA1o m\\u1EDBi\", \" \");\n      }\n    },\n    dependencies: [CommonModule, i3.NgForOf, i3.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.CheckboxControlValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.MinValidator, i1.FormGroupDirective, i1.FormControlName, i1.FormGroupName, i1.FormArrayName],\n    styles: [\".package-form[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n}\\n\\n.feature-item[_ngcontent-%COMP%] {\\n  background-color: #f8f9fa;\\n  border: 1px solid #dee2e6 !important;\\n}\\n\\n.card-header[_ngcontent-%COMP%] {\\n  background-color: #f8f9fa;\\n  border-bottom: 1px solid #dee2e6;\\n}\\n\\n.form-label[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n  color: #495057;\\n}\\n\\n.text-danger[_ngcontent-%COMP%] {\\n  color: #dc3545 !important;\\n}\\n\\n.btn-sm[_ngcontent-%COMP%] {\\n  padding: 0.25rem 0.5rem;\\n  font-size: 0.875rem;\\n}\\n\\n.features-list[_ngcontent-%COMP%] {\\n  min-height: 100px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvcGFja2FnZS1tYW5hZ2VtZW50L2NvbXBvbmVudHMvcGFja2FnZS1mb3JtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNFLGVBQUE7QUFBTjs7QUFHSTtFQUNFLHlCQUFBO0VBQ0Esb0NBQUE7QUFBTjs7QUFHSTtFQUNFLHlCQUFBO0VBQ0EsZ0NBQUE7QUFBTjs7QUFHSTtFQUNFLGdCQUFBO0VBQ0EsY0FBQTtBQUFOOztBQUdJO0VBQ0UseUJBQUE7QUFBTjs7QUFHSTtFQUNFLHVCQUFBO0VBQ0EsbUJBQUE7QUFBTjs7QUFHSTtFQUNFLGlCQUFBO0FBQU4iLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAucGFja2FnZS1mb3JtIHtcbiAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICB9XG4gICAgXG4gICAgLmZlYXR1cmUtaXRlbSB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhO1xuICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RlZTJlNiAhaW1wb3J0YW50O1xuICAgIH1cbiAgICBcbiAgICAuY2FyZC1oZWFkZXIge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGVlMmU2O1xuICAgIH1cbiAgICBcbiAgICAuZm9ybS1sYWJlbCB7XG4gICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgY29sb3I6ICM0OTUwNTc7XG4gICAgfVxuICAgIFxuICAgIC50ZXh0LWRhbmdlciB7XG4gICAgICBjb2xvcjogI2RjMzU0NSAhaW1wb3J0YW50O1xuICAgIH1cbiAgICBcbiAgICAuYnRuLXNtIHtcbiAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMC41cmVtO1xuICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICB9XG4gICAgXG4gICAgLmZlYXR1cmVzLWxpc3Qge1xuICAgICAgbWluLWhlaWdodDogMTAwcHg7XG4gICAgfVxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","CommonModule","ReactiveFormsModule","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","service_r2","_id","ɵɵadvance","ɵɵtextInterpolate2","name","ctx_r2","formatServiceType","type","ɵɵtemplate","PackageFormComponent_div_67_option_8_Template","PackageFormComponent_div_67_div_14_Template","ɵɵlistener","PackageFormComponent_div_67_Template_button_click_16_listener","i_r4","ɵɵrestoreView","_r1","index","ɵɵnextContext","ɵɵresetView","removeFeature","availableServices","tmp_7_0","feature_r5","get","value","imagePreview","getImageUrl","packageData","image","ɵɵsanitizeUrl","PackageFormComponent","constructor","fb","serviceService","editMode","loading","formSubmit","formCancel","selectedFile","initForm","ngOnInit","loadServices","ngOnChanges","changes","populateForm","packageForm","group","required","maxLength","description","price","min","originalPrice","currency","durationValue","durationUnit","features","array","isActive","isPopular","displayOrder","addFeature","featureGroup","serviceId","isUnlimited","limit","push","removeAt","patchValue","duration","unit","clear","forEach","feature","onFileSelect","event","file","target","files","size","alert","startsWith","reader","FileReader","onload","e","result","readAsDataURL","onSubmit","valid","formValue","packageRequest","undefined","emit","onCancel","isFieldInvalid","fieldName","field","invalid","dirty","touched","imagePath","getServices","subscribe","next","services","filter","s","error","console","_","ɵɵdirectiveInject","i1","FormBuilder","i2","ServiceService","_2","selectors","inputs","outputs","ɵɵNgOnChangesFeature","decls","vars","consts","template","PackageFormComponent_Template","rf","ctx","PackageFormComponent_Template_form_ngSubmit_0_listener","PackageFormComponent_div_16_Template","PackageFormComponent_div_31_Template","PackageFormComponent_div_42_Template","PackageFormComponent_div_55_Template","PackageFormComponent_div_56_Template","PackageFormComponent_Template_button_click_62_listener","PackageFormComponent_div_67_Template","PackageFormComponent_div_68_Template","PackageFormComponent_Template_input_change_79_listener","$event","PackageFormComponent_div_94_Template","PackageFormComponent_Template_button_click_98_listener","PackageFormComponent_i_102_Template","PackageFormComponent_i_103_Template","ɵɵclassProp","tmp_8_0","controls","length","ɵɵtextInterpolate1","i3","NgForOf","NgIf","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","NumberValueAccessor","CheckboxControlValueAccessor","SelectControlValueAccessor","NgControlStatus","NgControlStatusGroup","MinValidator","FormGroupDirective","FormControlName","FormGroupName","FormArrayName","styles"],"sources":["C:\\Users\\winni\\OneDrive\\Desktop\\JINZ-Media-Full-Source\\frontend\\src\\app\\features\\package-management\\components\\package-form.component.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ReactiveFormsModule, FormBuilder, FormGroup, Validators, FormArray } from '@angular/forms';\r\nimport { Package, CreatePackageRequest, PackageFeature } from '../models/package.model';\r\nimport { ServiceService } from '../../feature-management/services/service.service';\r\nimport { Service } from '../../feature-management/models/service.model';\r\n\r\n@Component({\r\n  selector: 'app-package-form',\r\n  standalone: true,\r\n  imports: [CommonModule, ReactiveFormsModule],\r\n  template: `\r\n    <form [formGroup]=\"packageForm\" (ngSubmit)=\"onSubmit()\" class=\"package-form\">\r\n      <div class=\"row\">\r\n        <!-- Basic Information -->\r\n        <div class=\"col-md-8\">\r\n          <div class=\"card mb-4\">\r\n            <div class=\"card-header\">\r\n              <h5 class=\"mb-0\">\r\n                <i class=\"fas fa-info-circle me-2\"></i>\r\n                Thông tin cơ bản\r\n              </h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label for=\"name\" class=\"form-label\">Tên gói <span class=\"text-danger\">*</span></label>\r\n                  <input \r\n                    type=\"text\" \r\n                    class=\"form-control\"\r\n                    id=\"name\"\r\n                    formControlName=\"name\"\r\n                    [class.is-invalid]=\"isFieldInvalid('name')\"\r\n                    placeholder=\"Nhập tên gói\">\r\n                  <div class=\"invalid-feedback\" *ngIf=\"isFieldInvalid('name')\">\r\n                    Vui lòng nhập tên gói\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"col-md-6 mb-3\">\r\n                  <label for=\"type\" class=\"form-label\">Loại gói <span class=\"text-danger\">*</span></label>\r\n                  <select \r\n                    class=\"form-select\"\r\n                    id=\"type\"\r\n                    formControlName=\"type\"\r\n                    [class.is-invalid]=\"isFieldInvalid('type')\">\r\n                    <option value=\"\">Chọn loại gói</option>\r\n                    <option value=\"monthly\">Hàng tháng</option>\r\n                    <option value=\"yearly\">Hàng năm</option>\r\n                    <option value=\"lifetime\">Trọn đời</option>\r\n                  </select>\r\n                  <div class=\"invalid-feedback\" *ngIf=\"isFieldInvalid('type')\">\r\n                    Vui lòng chọn loại gói\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"col-12 mb-3\">\r\n                  <label for=\"description\" class=\"form-label\">Mô tả</label>\r\n                  <textarea \r\n                    class=\"form-control\"\r\n                    id=\"description\"\r\n                    formControlName=\"description\"\r\n                    rows=\"3\"\r\n                    placeholder=\"Nhập mô tả gói...\"></textarea>\r\n                </div>\r\n\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label for=\"price\" class=\"form-label\">Giá <span class=\"text-danger\">*</span></label>\r\n                  <input \r\n                    type=\"number\" \r\n                    class=\"form-control\"\r\n                    id=\"price\"\r\n                    formControlName=\"price\"\r\n                    [class.is-invalid]=\"isFieldInvalid('price')\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    placeholder=\"0\">\r\n                  <div class=\"invalid-feedback\" *ngIf=\"isFieldInvalid('price')\">\r\n                    Vui lòng nhập giá hợp lệ\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label for=\"originalPrice\" class=\"form-label\">Giá gốc</label>\r\n                  <input \r\n                    type=\"number\" \r\n                    class=\"form-control\"\r\n                    id=\"originalPrice\"\r\n                    formControlName=\"originalPrice\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    placeholder=\"0\">\r\n                </div>\r\n\r\n                <div class=\"col-md-4 mb-3\">\r\n                  <label for=\"currency\" class=\"form-label\">Đơn vị tiền tệ</label>\r\n                  <select \r\n                    class=\"form-select\"\r\n                    id=\"currency\"\r\n                    formControlName=\"currency\">\r\n                    <option value=\"VND\">VND</option>\r\n                    <option value=\"USD\">USD</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <!-- Duration for non-lifetime packages -->\r\n                <div class=\"col-md-6 mb-3\" *ngIf=\"packageForm.get('type')?.value !== 'lifetime'\">\r\n                  <label for=\"durationValue\" class=\"form-label\">Thời gian <span class=\"text-danger\">*</span></label>\r\n                  <input \r\n                    type=\"number\" \r\n                    class=\"form-control\"\r\n                    id=\"durationValue\"\r\n                    formControlName=\"durationValue\"\r\n                    min=\"1\"\r\n                    placeholder=\"1\">\r\n                </div>\r\n\r\n                <div class=\"col-md-6 mb-3\" *ngIf=\"packageForm.get('type')?.value !== 'lifetime'\">\r\n                  <label for=\"durationUnit\" class=\"form-label\">Đơn vị thời gian <span class=\"text-danger\">*</span></label>\r\n                  <select \r\n                    class=\"form-select\"\r\n                    id=\"durationUnit\"\r\n                    formControlName=\"durationUnit\">\r\n                    <option value=\"days\">Ngày</option>\r\n                    <option value=\"months\">Tháng</option>\r\n                    <option value=\"years\">Năm</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Features Section -->\r\n          <div class=\"card mb-4\">\r\n            <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n              <h5 class=\"mb-0\">\r\n                <i class=\"fas fa-star me-2\"></i>\r\n                Tính năng gói\r\n              </h5>\r\n              <button \r\n                type=\"button\" \r\n                class=\"btn btn-sm btn-outline-primary\"\r\n                (click)=\"addFeature()\">\r\n                <i class=\"fas fa-plus me-1\"></i>\r\n                Thêm tính năng\r\n              </button>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"features-list\" formArrayName=\"features\">\r\n                <div \r\n                  *ngFor=\"let feature of features.controls; let i = index\" \r\n                  [formGroupName]=\"i\"\r\n                  class=\"feature-item p-3 border rounded mb-3\">\r\n                  <div class=\"row align-items-center\">\r\n                    <div class=\"col-md-6\">\r\n                      <label class=\"form-label\">Dịch vụ</label>\r\n                      <select \r\n                        class=\"form-select\"\r\n                        formControlName=\"serviceId\">\r\n                        <option value=\"\">Chọn dịch vụ</option>\r\n                        <option *ngFor=\"let service of availableServices\" [value]=\"service._id\">\r\n                          {{ service.name }} ({{ formatServiceType(service.type) }})\r\n                        </option>\r\n                      </select>\r\n                    </div>\r\n                    <div class=\"col-md-3\">\r\n                      <div class=\"form-check\">\r\n                        <input \r\n                          class=\"form-check-input\" \r\n                          type=\"checkbox\" \r\n                          formControlName=\"isUnlimited\"\r\n                          [id]=\"'unlimited-' + i\">\r\n                        <label class=\"form-check-label\" [for]=\"'unlimited-' + i\">\r\n                          Không giới hạn\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-md-2\" *ngIf=\"!feature.get('isUnlimited')?.value\">\r\n                      <label class=\"form-label\">Giới hạn</label>\r\n                      <input \r\n                        type=\"number\" \r\n                        class=\"form-control\"\r\n                        formControlName=\"limit\"\r\n                        min=\"0\">\r\n                    </div>\r\n                    <div class=\"col-md-1\">\r\n                      <button \r\n                        type=\"button\" \r\n                        class=\"btn btn-sm btn-outline-danger\"\r\n                        (click)=\"removeFeature(i)\">\r\n                        <i class=\"fas fa-trash\"></i>\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div *ngIf=\"features.length === 0\" class=\"text-center text-muted py-4\">\r\n                  <i class=\"fas fa-star fa-2x mb-2 d-block\"></i>\r\n                  Chưa có tính năng nào. Click \"Thêm tính năng\" để bắt đầu.\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Settings & Preview -->\r\n        <div class=\"col-md-4\">\r\n          <div class=\"card mb-4\">\r\n            <div class=\"card-header\">\r\n              <h5 class=\"mb-0\">\r\n                <i class=\"fas fa-cog me-2\"></i>\r\n                Cài đặt\r\n              </h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"image\" class=\"form-label\">Hình ảnh gói</label>\r\n                <input \r\n                  type=\"file\" \r\n                  class=\"form-control\"\r\n                  id=\"image\"\r\n                  (change)=\"onFileSelect($event)\"\r\n                  accept=\"image/*\">\r\n                <small class=\"text-muted\">Tối đa 5MB. Định dạng: JPG, PNG, GIF</small>\r\n              </div>\r\n\r\n              <div class=\"mb-3\">\r\n                <label for=\"displayOrder\" class=\"form-label\">Thứ tự hiển thị</label>\r\n                <input \r\n                  type=\"number\" \r\n                  class=\"form-control\"\r\n                  id=\"displayOrder\"\r\n                  formControlName=\"displayOrder\"\r\n                  min=\"0\">\r\n              </div>\r\n\r\n              <div class=\"form-check mb-3\">\r\n                <input \r\n                  class=\"form-check-input\" \r\n                  type=\"checkbox\" \r\n                  id=\"isActive\"\r\n                  formControlName=\"isActive\">\r\n                <label class=\"form-check-label\" for=\"isActive\">\r\n                  Kích hoạt gói\r\n                </label>\r\n              </div>\r\n\r\n              <div class=\"form-check mb-3\">\r\n                <input \r\n                  class=\"form-check-input\" \r\n                  type=\"checkbox\" \r\n                  id=\"isPopular\"\r\n                  formControlName=\"isPopular\">\r\n                <label class=\"form-check-label\" for=\"isPopular\">\r\n                  Gói phổ biến\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Image Preview -->\r\n          <div class=\"card mb-4\" *ngIf=\"imagePreview || (editMode && packageData?.image)\">\r\n            <div class=\"card-header\">\r\n              <h6 class=\"mb-0\">Xem trước hình ảnh</h6>\r\n            </div>\r\n            <div class=\"card-body text-center\">\r\n              <img \r\n                [src]=\"imagePreview || getImageUrl(packageData?.image)\" \r\n                alt=\"Package Preview\"\r\n                class=\"img-fluid rounded\"\r\n                style=\"max-height: 200px;\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Form Actions -->\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"d-flex justify-content-end gap-2\">\r\n            <button \r\n              type=\"button\" \r\n              class=\"btn btn-secondary\"\r\n              (click)=\"onCancel()\">\r\n              <i class=\"fas fa-times me-1\"></i>\r\n              Hủy\r\n            </button>\r\n            <button \r\n              type=\"submit\" \r\n              class=\"btn btn-primary\"\r\n              [disabled]=\"packageForm.invalid || loading\">\r\n              <i class=\"fas fa-spinner fa-spin me-1\" *ngIf=\"loading\"></i>\r\n              <i class=\"fas fa-save me-1\" *ngIf=\"!loading\"></i>\r\n              {{ editMode ? 'Cập nhật' : 'Tạo mới' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  `,\r\n  styles: [`\r\n    .package-form {\r\n      max-width: 100%;\r\n    }\r\n    \r\n    .feature-item {\r\n      background-color: #f8f9fa;\r\n      border: 1px solid #dee2e6 !important;\r\n    }\r\n    \r\n    .card-header {\r\n      background-color: #f8f9fa;\r\n      border-bottom: 1px solid #dee2e6;\r\n    }\r\n    \r\n    .form-label {\r\n      font-weight: 500;\r\n      color: #495057;\r\n    }\r\n    \r\n    .text-danger {\r\n      color: #dc3545 !important;\r\n    }\r\n    \r\n    .btn-sm {\r\n      padding: 0.25rem 0.5rem;\r\n      font-size: 0.875rem;\r\n    }\r\n    \r\n    .features-list {\r\n      min-height: 100px;\r\n    }\r\n  `]\r\n})\r\nexport class PackageFormComponent implements OnInit, OnChanges {\r\n  @Input() packageData: Package | null = null;\r\n  @Input() editMode: boolean = false;\r\n  @Input() loading: boolean = false;\r\n  @Output() formSubmit = new EventEmitter<CreatePackageRequest>();\r\n  @Output() formCancel = new EventEmitter<void>();\r\n\r\n  packageForm!: FormGroup;\r\n  selectedFile: File | null = null;\r\n  imagePreview: string | null = null;\r\n  availableServices: Service[] = [];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private serviceService: ServiceService\r\n  ) {\r\n    this.initForm();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initForm();\r\n    this.loadServices();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes['packageData'] && this.packageData && this.editMode) {\r\n      this.populateForm();\r\n    }\r\n  }\r\n\r\n  initForm() {\r\n    this.packageForm = this.fb.group({\r\n      name: ['', [Validators.required, Validators.maxLength(100)]],\r\n      description: ['', [Validators.maxLength(500)]],\r\n      type: ['', Validators.required],\r\n      price: [0, [Validators.required, Validators.min(0)]],\r\n      originalPrice: [0, Validators.min(0)],\r\n      currency: ['VND'],\r\n      durationValue: [1, Validators.min(1)],\r\n      durationUnit: ['months'],\r\n      features: this.fb.array([]),\r\n      isActive: [true],\r\n      isPopular: [false],\r\n      displayOrder: [0, Validators.min(0)]\r\n    });\r\n  }\r\n\r\n  get features() {\r\n    return this.packageForm.get('features') as FormArray;\r\n  }\r\n\r\n  addFeature() {\r\n    const featureGroup = this.fb.group({\r\n      serviceId: ['', Validators.required],\r\n      isUnlimited: [true],\r\n      limit: [0, Validators.min(0)]\r\n    });\r\n    this.features.push(featureGroup);\r\n  }\r\n\r\n  removeFeature(index: number) {\r\n    this.features.removeAt(index);\r\n  }\r\n\r\n  populateForm() {\r\n    if (!this.packageData) return;\r\n\r\n    this.packageForm.patchValue({\r\n      name: this.packageData.name,\r\n      description: this.packageData.description,\r\n      type: this.packageData.type,\r\n      price: this.packageData.price,\r\n      originalPrice: this.packageData.originalPrice,\r\n      currency: this.packageData.currency,\r\n      durationValue: this.packageData.duration?.value,\r\n      durationUnit: this.packageData.duration?.unit,\r\n      isActive: this.packageData.isActive,\r\n      isPopular: this.packageData.isPopular,\r\n      displayOrder: this.packageData.displayOrder\r\n    });\r\n\r\n    // Clear and populate features\r\n    this.features.clear();\r\n    this.packageData.features.forEach(feature => {\r\n      const featureGroup = this.fb.group({\r\n        serviceId: [feature.serviceId, Validators.required],\r\n        isUnlimited: [feature.isUnlimited],\r\n        limit: [feature.limit, Validators.min(0)]\r\n      });\r\n      this.features.push(featureGroup);\r\n    });\r\n  }\r\n\r\n  onFileSelect(event: any) {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      // Validate file size (5MB)\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        alert('File quá lớn. Vui lòng chọn file nhỏ hơn 5MB.');\r\n        return;\r\n      }\r\n\r\n      // Validate file type\r\n      if (!file.type.startsWith('image/')) {\r\n        alert('Vui lòng chọn file hình ảnh.');\r\n        return;\r\n      }\r\n\r\n      this.selectedFile = file;\r\n\r\n      // Create preview\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        this.imagePreview = e.target?.result as string;\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.packageForm.valid) {\r\n      const formValue = this.packageForm.value;\r\n      \r\n      const packageRequest: CreatePackageRequest = {\r\n        name: formValue.name,\r\n        description: formValue.description,\r\n        type: formValue.type,\r\n        price: formValue.price,\r\n        originalPrice: formValue.originalPrice || undefined,\r\n        currency: formValue.currency,\r\n        features: formValue.features,\r\n        isActive: formValue.isActive,\r\n        isPopular: formValue.isPopular,\r\n        displayOrder: formValue.displayOrder,\r\n        image: this.selectedFile || undefined\r\n      };\r\n\r\n      // Add duration for non-lifetime packages\r\n      if (formValue.type !== 'lifetime') {\r\n        packageRequest.duration = {\r\n          value: formValue.durationValue,\r\n          unit: formValue.durationUnit\r\n        };\r\n      }\r\n\r\n      this.formSubmit.emit(packageRequest);\r\n    }\r\n  }\r\n\r\n  onCancel() {\r\n    this.formCancel.emit();\r\n  }\r\n\r\n  isFieldInvalid(fieldName: string): boolean {\r\n    const field = this.packageForm.get(fieldName);\r\n    return !!(field && field.invalid && (field.dirty || field.touched));\r\n  }\r\n\r\n  getImageUrl(imagePath?: string): string {\r\n    if (!imagePath) return '';\r\n    return `http://localhost:5000/${imagePath}`;\r\n  }\r\n\r\n  loadServices() {\r\n    this.serviceService.getServices().subscribe({\r\n      next: (services) => {\r\n        this.availableServices = services.filter(s => s.isActive);\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading services:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  formatServiceType(type: string): string {\r\n    return this.serviceService.formatServiceType(type);\r\n  }\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}